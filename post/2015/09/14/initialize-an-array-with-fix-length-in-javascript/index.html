<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><title>Initialize an Array With Fix Length in Javascript |</title><meta name=description content="A simple blog."><link rel=stylesheet href=http://yang-wei.github.io/css/simpleness.css><link rel=canonical href=http://yang-wei.github.io/post/2015/09/14/initialize-an-array-with-fix-length-in-javascript/><link rel=alternate type=application/rss+xml href title><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body class=container><nav class=navigation><div class=nav-left><div class="nav-item nav-title"><a href=http://yang-wei.github.io/></a></div><div class="nav-item nav-menu"><a href=/>Home</a>
<a href=/about/>About</a></div></div><div class="nav-item nav-right fontawesome"><a href=https://twitter.com/yangwei21 target=_blank><i title=Twitter class="fab fa-twitter"></i></a>
<a href=https://github.com/yang-wei target=_blank><i title=GitHub class="fab fa-github"></i></a></div></nav><article class=post><header class=post-header><h1 style=text-align:center>Initialize an Array With Fix Length in Javascript</h1><div class=post-metadata><time datetime=2015-09-14T00:00:00Z>September 14, 2015</time> &nbsp;
<i class="far fa-clock"></i>
2 min
7 s
&nbsp;
<i class="fas fa-folder"></i>
<a href=/categories/array>array</a>
&nbsp;
<a href=/categories/javascript>javascript</a>
&nbsp;</div></header><div class=post-text><p>In JavaScript, we love array. Furthermore, since the wonderful <strong>Array Extras</strong> added in ES5, it gives us the power to program in a more expressive way with array.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>friends</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Ali&#34;</span>, <span style=color:#e6db74>&#34;Winson&#34;</span>, <span style=color:#e6db74>&#34;John&#34;</span>]; 
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sayHiToFriends</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>friends</span>.<span style=color:#a6e22e>map</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>friend</span>) {
  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hi &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>friend</span>;
});
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>friends</span>); <span style=color:#75715e>// [&#34;Ali&#34;, &#34;Winson&#34;, &#34;John&#34;]   
</span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>sayHiToFriends</span>); <span style=color:#75715e>// [&#34;Hi Ali&#34;, &#34;Hi Winson&#34;, &#34;Hi John&#34;] 
</span></code></pre></div><p>Note that friends value doesn&rsquo;t change. <code>Array.prototype.map</code> return a new array for us. Immutability huh?</p><p>In some case, we might need to initialize array with a fix length so that we can iterate over it with method like <code>Array.prototype.map</code> etc. So how do we initialize an array?</p><p>In JavaScript, we can create array with 2 ways:</p><h4 id=1-the-new-syntax>1. The new syntax</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>arr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>5</span>);
<span style=color:#a6e22e>arr</span>.<span style=color:#a6e22e>length</span>;   <span style=color:#75715e>// 5
</span></code></pre></div><h4 id=2-array-literal>2. Array literal</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>arr</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>];
<span style=color:#a6e22e>arr</span>.<span style=color:#a6e22e>length</span>;   <span style=color:#75715e>// 5
</span></code></pre></div><p>Obviously, if we want to init an array with a fix length, the new syntax seems easier. Imagine how do we create array with length 100 with the array literal?
Sure we can do something like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createArrayWithLength</span>(<span style=color:#a6e22e>n</span>) {
  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>arr</span> <span style=color:#f92672>=</span> [], <span style=color:#a6e22e>i</span>;
  <span style=color:#66d9ef>for</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>n</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
    <span style=color:#a6e22e>arr</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>i</span>); 
  }
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>arr</span>;
}
<span style=color:#a6e22e>createArrayWithLength</span>(<span style=color:#ae81ff>100</span>).<span style=color:#a6e22e>length</span>; <span style=color:#75715e>// 100
</span></code></pre></div><p>But it&rsquo;s not expressive. Compare this to:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>array</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>100</span>);
<span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>length</span>; <span style=color:#75715e>// 100
</span></code></pre></div><p>Boom, short and clean. However, the array created is filled with <em>undefined</em>. Thus make it non-iterable.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>100</span>).<span style=color:#a6e22e>map</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>i</span>) {
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>i</span>;
}); <span style=color:#75715e>// [undefined x 100]
</span></code></pre></div><h3 id=so-what-is-the-solution>So what is the solution</h3><p>Here are some solutions implemented by myself and also collected from resources online.</p><h4 id=1-functionprototypeapply>1. Function.prototype.apply</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>Array.<span style=color:#a6e22e>apply</span>(<span style=color:#66d9ef>null</span>, Array(<span style=color:#ae81ff>100</span>))
.<span style=color:#a6e22e>map</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>i</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>i</span> }); }) 
<span style=color:#75715e>// will give us [0...99]
</span></code></pre></div><h4 id=2-arrayprototypefill>2. Array.prototype.fill</h4><p>With es6 now we have many additional array method. One of them can help us to achieve what we want.</p><pre><code>Array(100).fill(null)
.map(function(val, i) { return i }); })
// will give us [0...99]
</code></pre><p>However, this method is an es6 method so <a href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/fill#Browser_compatibility>not every browser support</a> it. You might want to consider using <a href=babeljs.io>babel</a> compiler or <a href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/fill#Polyfill>polyfill</a> for now.</p><h4 id=3-arrayfrom>3. Array.from</h4><p>Another cool feature from es6 will also complete our task.</p><pre><code>Array.from(new Array(100), function(val, i) { return i }); })
</code></pre><p>This is also an es6 feature, so if compatibility is what you considering, please use polyfill.</p><h4 id=4-utility-library>4. Utility library</h4><p>Using library like <a href=https://lodash.com/docs#range>lodash</a> can make our code looks cleaner.</p><pre><code>_.range(100)
</code></pre><blockquote><p>Protip: If you use node, you can require smallest <a href=https://www.npmjs.com/package/lodash.range>lodash.range package</a> from npm.</p></blockquote><h3 id=recap>Recap</h3><p>We had seen 4 solutions to do this in JavaScirpt. By using <code>Function.proptotype.apply</code> we can initialize an array with a fix length or incremental value. Moreover, we can achieve the same thing more elegant by using es6 feature. Finally, never forget library like lodash or underscore too =)</p><h3 id=reference>Reference</h3><ul><li><a href=http://www.2ality.com/2014/05/es6-array-methods.html>ECMAScript 6â€™s new array methods</a></li><li><a href=http://jslinterrors.com/the-array-literal-notation-is-preferrable/>The array literal notation [] is preferrable</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill#Polyfill>MDN Array.prototype.fill</a></li></ul></div><footer class=post-footer></footer><div class=comments><div class=comments></div></div></article><div class=foot>&copy; 2019 - 2021 &#183;
<a href=/></a>&#183;
Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div></body><script src=/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById('article')})</script></html>